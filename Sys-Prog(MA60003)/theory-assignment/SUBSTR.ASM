.MODEL SMALL
.STACK 100H
.DATA
    STR1 DB "THIS IS A STRING OF CHARECTERS$"
    STR2 DB "STRINH$"
    STR3 DB "STR2 IS A SUBSTRING OF STR1",0DH,0AH,'$'
    STR4 DB "STR2 IS NOT A SUBSTRING OF STR1",0DH,0AH,'$'

.CODE
MAIN PROC
    MOV AX,@DATA
    MOV DS,AX
    MOV ES,AX
    LEA SI,STR2
    CALL COUNT_S
    MOV CX,BX
    LEA SI,STR1
    CALL COUNT_S
    LEA DI,STR2
    LEA SI,STR1
    CALL SUBSTR
    CMP AX,1
    JNE @ELSE
    MOV AH,9
    LEA DX,STR3
    INT 33
    JMP @END
@ELSE:
    MOV AH,9
    LEA DX,STR4
    INT 33    
@END:    
    MOV AH,76
    INT 33
MAIN ENDP

COUNT_S PROC 
    ;INPUT SI STARTING ADDRESS OFTHE STRING
    ;RETURN THE BX AS NUMBER OF CHARECTERS
        PUSH SI
        XOR BX,BX
    @STARTLOOP:
        CMP BYTE PTR [SI],'$'
        JE @ENDLOOP
        INC SI
        INC BX
        JMP @STARTLOOP
    @ENDLOOP:
        POP SI
        RET
COUNT_S ENDP

SUBSTR PROC
    PUSH BX
    PUSH CX
    PUSH SI
    PUSH DI
    ;
    XOR AX,AX
    SUB BX,CX
 
@LOOPSTART:
    PUSH CX
    PUSH SI
    PUSH DI
    CLD
    REPE CMPSB
    JNE @ENDIF1
    MOV AX,1
    POP DI
    POP SI
    POP CX
    JMP @LOOPEND
@ENDIF1:
    POP DI
    POP SI
    POP CX
    INC SI
    DEC BX
    JNZ @LOOPSTART
@LOOPEND:
    ;
    POP DI
    POP SI
    POP CX
    POP BX
    RET
SUBSTR ENDP
END MAIN